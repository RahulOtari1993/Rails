<div class="app-content content">
  <div class="content-overlay"></div>
  <div class="header-navbar-shadow"></div>
  <div class="content-wrapper">
    <div class="content-header row">
      <div class="content-header-left col-md-9 col-12 mb-2">
        <div class="row breadcrumbs-top">
          <div class="col-12">
            <h2 class="content-header-title float-left mb-0">Your Programs</h2>
          </div>
        </div>
      </div>
    </div>
    <div class="content-body">
      <section id="data-list-view" class="data-list-view-header">
        <div class="table-responsive">
          <table class="table data-list-view campaign-list-view">
            <thead>
            <tr>
              <th>CREATED AT</th>
              <th>PROGRAM NAME</th>
              <th>DOMAIN</th>
              <th>MEMBERS</th>
              <th>CHALLENGES COMPLETED</th>
              <th>REWARDS AWARDED</th>
              <% if @is_admin %>
                <th>DEACTIVATE</th>
              <% end %>
            </tr>
            </thead>
            <tbody>
            <% @campaigns.includes(:participants, :challenges, :rewards).each do |campaign| %>
              <tr>
                <td class="product-category">
                  <%= campaign.created_at.strftime("%B %d, %Y") %>
                </td>

                <td class="product-name campaign-<%= campaign.id %>-link">
                  <% if campaign.is_active %>
                    <a href="<%= admin_campaign_dashboard_path(campaign) %>"><%= campaign.name %></a>
                  <% else %>
                    <%= campaign.name %>
                  <% end %>
                </td>

                <td class="product-category">
                  <%= campaign.domain %>
                </td>

                <td class="product-category">
                  <%= campaign.participants.count %>
                </td>

                <td class="product-category">
                  <%= campaign.challenges.map(&:completions).compact.sum %>
                </td>

                <td class="product-price">
                  <%= campaign.rewards.map(&:claims).compact.sum %>
                </td>

                <% if @is_admin %>
                  <td class="product-action campaign-<%= campaign.id %>-action">
                    <% if campaign.is_active %>
                      <button class="btn btn-xs btn-action btn-warning de-active-campaign-btn"
                        data-url="<%= deactivate_admin_organizations_campaign_path(campaign.id) %>">
                        Deactivate
                      </button>
                    <% else %>
                      DEACTIVATED
                    <% end %>
                  </td>
                <% end %>
              </tr>
            <% end %>
            </tbody>
          </table>
        </div>
      </section>
    </div>
  </div>
</div>
