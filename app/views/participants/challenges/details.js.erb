<% if @challenge.challenge_type == "link" %>
  $('.challenge-submission-modal').html("<%= escape_javascript render '/participants/challenges/modals/visit_url_modal', challenge: @challenge %>");
  $('#visit_url_modal').modal('show');
<% elsif @challenge.challenge_type == "video" %>
  $('.challenge-submission-modal').html("<%= escape_javascript render '/participants/challenges/modals/watch_video_modal', challenge: @challenge %>");
  $('#watch_video_modal').modal('show');
<% elsif @challenge.challenge_type == "article" %>
  $('.challenge-submission-modal').html("<%= escape_javascript render '/participants/challenges/modals/read_article_modal', challenge: @challenge %>");
  $('#read_article_modal').modal('show');
<% elsif @challenge.challenge_type == "collect" && @challenge.parameters == 'quiz' %>
  $('.challenge-submission-modal').html("<%= escape_javascript render '/participants/challenges/modals/quiz_modal', challenge: @challenge %>");
  $('#challenge_quiz_modal').modal('show');

  $('.challenge-quiz-modal-form').validate({
    errorElement: 'div',
    errorPlacement: function (error, element) {
      var placement = $(element).data('error');
      if (placement) {
        $('.' + placement).html(error)
      } else {
        error.insertAfter(element);
      }
    }
  });
  customQuestionValidation();

<% elsif @challenge.challenge_type == "collect" && @challenge.parameters == 'survey' %>
  $('.challenge-submission-modal').html("<%= j render '/participants/challenges/modals/survey_modal', challenge: @challenge %>");
  $('#challenge_survey_modal').modal('show');

  $('.challenge-survey-form').validate({
    errorElement: 'div',
    errorPlacement: function (error, element) {
      var placement = $(element).data('error');
      if (placement) {
        $('.' + placement).html(error)
      } else {
        error.insertAfter(element);
      }
    }
  });
  customQuestionValidation();

<% elsif @challenge.challenge_type == "referral" %>
  $('.challenge-submission-modal').html("<%= escape_javascript render '/participants/challenges/modals/recruit_modal', challenge: @challenge %>");
  $('#recruit_modal').modal('show');
<% elsif @challenge.challenge_type == "share" %>
  $('.challenge-submission-modal').html("<%= escape_javascript render '/participants/challenges/modals/share_modal', challenge: @challenge %>");
  $('#share_modal').modal('show');
<% elsif @challenge.challenge_type == "engage" && @challenge.parameters == 'facebook' %>
  $('.challenge-submission-modal').html("<%= escape_javascript render '/participants/challenges/modals/social_feed_modal', challenge: @challenge %>");
  $('#social_feed_modal').modal('show');

  $(document).ready(function () {
    // initialize gallery
    $('#social_feed_modal a.thumbnail').on('click', function () {
      $('.coin').removeClass('animated');
      $('#post_visit_checkmark').hide();
      updateGallery($(this));
    });

    // update gallery for previous, next buttons only one time initialize
    $('#show-next-btn, #show-previous-btn').click(function () {
      $('.coin').removeClass('animated');
      $('#post_visit_checkmark').hide();

      var current_image = $(this).attr('data-current-counter');
      if ($(this).attr('id') === 'show-previous-btn') {
        current_image--;
      } else {
        current_image++;
      }
      var selector = $($('#social_feed_modal a.thumbnail')[current_image - 1]);
      updateGallery(selector);
    });
  });

<% elsif @challenge.challenge_type == "collect" %>
<% elsif @challenge.challenge_type == "signup" %>
<% end %>

// Watch a video script and Initialise the iframe start
  onYouTubeIframeAPIReady()
