<div class="modal fade text-left challenge-modal" id="share_modal">
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header border-bottom-0">
        <% unless @challenge_activity.blank? %>
          <span class="time_class pull-left font-weight-light"><i class="fa fa-check-circle" aria-hidden="true"></i> Completed on <%= challenge.finish.strftime('%d/%m/%Y') %></span>
        <% else %>
          <span class="time_class pull-left font-weight-light"><i class="fa fa-clock-o" aria-hidden="true"></i> <%= get_remaining_time_in_words(challenge.finish) %></span>
        <% end %>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
        <div class="challenge-content text-left font-weight-light">
          <!-- challenge details -->
          <%= render 'participants/challenges/modals/challenge_header_details', challenge: challenge %>
          <div class="row justify-content-md-center">
            <div class="col-sm-10 mt-3 mb-3">
              <div class="card card-default">
                <img src="<%= challenge.social_image.url %>" class="card-img-top">
                <div class="card-body">
                  <h5 class="card-title"><%= challenge.social_title %></h5>
                  <%= challenge.social_description.html_safe %>
                  <p><%= link_to "Visit Now",challenge.link, class: "btn btn-success" %></p>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-12 visit-btn-container">
              <% if (challenge.parameters == 'facebook') %>
                  <a id="share-fb-btn" href="javascript:void(0);"
                    class="btn box1_btn facebook_btn btn-block">
                    <span class="icon-btn-share fa fa-facebook"></span>
                    <span class="btn-share-text">Share on Facebook</span>
                  </a>
              <% elsif challenge.parameters == 'twitter' %>
                  <a id="share-twitter-btn" href="javascript:void(0);"
                    class="btn box1_btn twitter_btn btn-block prettySocial"
                    data-type="twitter" data-url="<%= @twitter_url %>"
                    data-description="<%= challenge.social_title.html_safe %>">
                    <span class="icon-btn-share fa fa-twitter"></span>
                    <span class="btn-share-text">Share on Twitter</span>
                  </a>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
$(document).ready(function() {
  <% if @facebook_url %>
    $.ajaxSetup({ cache: true });
    $.getScript('https://connect.facebook.net/en_US/sdk.js', function(){
      FB.init({
        appId: '<%= @conf.facebook_app_id %>',
        version: 'v7.0' // or v2.1, v2.2, v2.3, ...
      });
      $(document).on('click','#share-fb-btn', function(e){
        e.preventDefault();
        FB.ui({
          display: 'popup',
          method: 'share',
          href: '<%= @facebook_url %>'
        }, function(response){

        })
      })
    });
  <% end %>

  <% if @twitter_url %>
    // Share a twitter Initialize
    $('.prettySocial').prettySocial();
  <% end %>
});
</script>
