<div class="modal fade text-left" id="onboarding_questions_modal">
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <div class="row">
          <div class="col-12">
            <h4 class="modal-title"><%= challenge.caption %></h4>
          </div>
        </div>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
        <h4><b class="text-center"><%= challenge.title %></b></h4>
        <h6><%= challenge.description %></h6>

        <%= form_with(url: submission_participants_challenge_path(challenge.id), method: 'post',
                      class: 'onboarding-questions-form', model: current_participant, local: false) do |f| %>
          <% challenge.questions.each do |question| %>
            <% profile_attribute = question.profile_attribute %>
            <div class="row">
              <div class="col-12">
                <div class="form-group">
                  <%= label :facebook_app_id, question.title %>
                  <div class="position-relative">
                    <%= hidden_field_tag "questions[#{question.id}][profile_attribute_id]", profile_attribute.id %>
                    <%= hidden_field_tag "questions[#{question.id}][is_custom]", profile_attribute.is_custom %>

                    <% case profile_attribute.field_type %>
                    <% when 'string' then %>
                      <%= text_field_tag "questions[#{question.id}][answer]", "",
                                         class: "form-control answer-string #{answer_required('answer-string', question.is_required)}",
                                         placeholder: "Answer here" %>
                    <% when 'text_area' then %>
                      <%= text_area_tag "questions[#{question.id}][answer]", "",
                                        class: "form-control answer-text-area #{answer_required('answer-text-area', question.is_required)}",
                                        placeholder: "Add details here" %>
                    <% when 'boolean' then %>
                    <% when 'date' then %>
                      <%= text_field_tag "questions[#{question.id}][answer]", "",
                                         class: "form-control answer-date #{answer_required('answer-date', question.is_required)}",
                                         placeholder: "Select date" %>
                    <% when 'time' then %>
                      <%= text_field_tag "questions[#{question.id}][answer]", "",
                                         class: "form-control answer-time #{answer_required('answer-time', question.is_required)}",
                                         placeholder: "Select time" %>
                    <% when 'date_time' then %>
                      <div class="wrap-date-time">
                        <%= text_field_tag "questions[#{question.id}][answer]", "",
                                           class: "form-control answer-date-time #{answer_required('answer-date-time', question.is_required)}",
                                           placeholder: "Select date time", readonly: true %>
                        <div class="hidden-date-time-field">
                          <input type="text" class="date-answer-hidden-field"/>
                          <input type="text" class="time-answer-hidden-field"/>
                        </div>
                        <div class="date-time-picker-output"></div>
                      </div>


                    <% when 'number' then %>
                      <%= text_field_tag "questions[#{question.id}][answer]", "",
                                         class: "form-control answer-number #{answer_required('answer-number', question.is_required)}",
                                         placeholder: "Answer here" %>
                    <% when 'decimal' then %>
                      <%= text_field_tag "questions[#{question.id}][answer]", "",
                                         class: "form-control answer-decimal #{answer_required('answer-decimal', question.is_required)}",
                                         placeholder: "Answer here" %>
                    <% when 'radio_button' then %>
                      <% question.question_options.each do |option| %>
                        <%= radio_button_tag "questions[#{question.id}][answer]", true, false,
                                             id: "questions_#{question.id}_answer_#{option.id}",
                                             class: "answer-radio-button #{answer_required('answer-radio-button', question.is_required)}" %>

                        <label for="<%= "questions_#{question.id}_answer_#{option.id}" %>"><%= option.details %></label>
                      <% end %>
                    <% when 'check_box' then %>
                      <% question.question_options.each do |option| %>
                        <%= check_box_tag "questions[#{question.id}][answer][]", true, false,
                                          id: "questions_#{question.id}_answer_#{option.id}",
                                          class: "answer-check-box #{answer_required('answer-check-box', question.is_required)}" %>

                        <label for="<%= "questions_#{question.id}_answer_#{option.id}" %>"><%= option.details %></label>
                      <% end %>
                    <% end %>
                  </div>
                </div>
              </div>
            </div>
          <% end %>
        <% end %>
      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
